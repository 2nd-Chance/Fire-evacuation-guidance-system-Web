<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" href="static/css/Tab.css">
<link rel="stylesheet" href="static/css/FEGS.css">
<link rel="stylesheet" href="static/css/Canvas.css">
<script src="static/js/EditMapCanvas.js"></script>
<script src="static/js/Control.js"></script>
<head>
    <meta charset="UTF-8">
    <title>Fire Evacuation Guidance System</title>
    <script>
        'use strict';
        let control = new Control();

        function start() {
            tabInit();
            control.setAlert(false);
            let EMCanvas = new EditMapCanvas();
            setCanvasSize();
        }

        function setCanvasSize() {
            let _page = document.querySelector("div.page");
            let _canvas = document.getElementById("Edit_Map_canvas")
            _canvas.width = _page.parent.style.width;
            _canvas.height = _canvas.parent.style.height;
        }

        function tabInit() {
            showTab('Home', 'Home_tab');
            hideTab('Edit_Map', 'Edit_Map_tab');
            hideTab('Evacuation_Route', 'Evacuation_Route_tab');
        }

        function hideTab(page, tab) {
            document.getElementById(page).style.display = 'none';
            document.getElementById(page + '_img').src = 'static/image/' + page + '_black.png'
            document.getElementById(tab).style.color = 'black';
            document.getElementById(tab).style.backgroundColor = 'white';
        }

        function showTab(page, tab) {
            document.getElementById(page).style.display = 'block';
            document.getElementById(page + '_img').src = 'static/image/' + page + '_red.png'
            document.getElementById(tab).style.color = 'red';
            document.getElementById(tab).style.backgroundColor = '#B7B7B7';
        }

        function changeTab(tab) {
            if (tab.id === "Home_tab") {
                showTab('Home', 'Home_tab');
                hideTab('Edit_Map', 'Edit_Map_tab');
                hideTab('Evacuation_Route', 'Evacuation_Route_tab');
            } else if (tab.id === "Edit_Map_tab") {
                hideTab('Home', 'Home_tab');
                showTab('Edit_Map', 'Edit_Map_tab');
                hideTab('Evacuation_Route', 'Evacuation_Route_tab')
            } else if (tab.id === "Evacuation_Route_tab") {
                hideTab('Edit_Map', 'Edit_Map_tab');
                hideTab('Home', 'Home_tab');
                showTab('Evacuation_Route', 'Evacuation_Route_tab')
            }
        }

        function showNodeCollection() {
            document.getElementById('nodeCollection').style.display = 'block';
        }

        function hideNodeCollection() {
            document.getElementById('nodeCollection').style.display = 'none';
        }
    </script>
</head>

<body onload="start()">
    <div id="navBar">Fire Evacuation Guidance System</div>
    <div id="pageContainer">
        <div id="Home" class="page">
            <h1 id="home_text">There is no fire. <br> You are safe.</h1>
        </div>
        <div id="Edit_Map" class="page">
            <div class="canvasContainer">
                <canvas id="Edit_Map_canvas"></canvas>
                <div id="nodeCollection_open_button" class="cursorPointer" onClick="showNodeCollection()">
                    <img src="static/image/up-arrow_black.png">
                </div>
            </div>

            <div id="nodeCollection" style="display: none;">
                <div id="nodeCollection_close_button" class="cursorPointer" onclick="hideNodeCollection(); control.setAlert(true);">
                    <img src="static/image/down-arrow_black.png">
                </div>
                <div id="freeNodeList">
                    <!--동적으로 새로운 노드 추가-->
                    <div onclick="addRoomToCanvas()">room name</div>


                </div>
            </div>

            <div id="roomList" style="display: none; float: right;">
                <room id="room1" alertState="1">
                    <statcieDevice>

                    </statcieDevice>
                    <dynamicDevice>

                    </dynamicDevice>
                    <links>1</links>
                </room>
            </div>
        </div>
        <div id="Evacuation_Route" class="page">
            <div class="canvasContainer">
                this is Evacuation Route
                <canvas id="Evacuation_Route_canvas"></canvas>
            </div>
        </div>
    </div>
    <div id="bottomTab">
        <div class="tabContainer cursorPointer hoverTextShadow">
            <div class="tab">
                <div id="Home_tab" onclick="changeTab(this)">
                    <img class="tab_img" id="Home_img" src="static/image/Home_black.png">
                    <div class="tab_text">Home</div>
                </div>
            </div>
            <div class="tab">
                <div id="Edit_Map_tab" onclick="changeTab(this)">
                    <img class="tab_img" id="Edit_Map_img" src="static/image/Edit_Map_black.png">
                    <div class="tab_text">Edit Map</div>
                </div>
            </div>
            <div class="tab">
                <div id="Evacuation_Route_tab" onclick="changeTab(this)">
                    <img class="tab_img" id="Evacuation_Route_img" src="static/image/Evacuation_Route_black.png">
                    <div class="tab_text">Evac. Route</div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>